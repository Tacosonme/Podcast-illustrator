{
  "name": "podcast-illustrator",
  "services": {
    "backend": {
      "source": {
        "repo": "podcast-illustrator-backend"
      },
      "build": {
        "builder": "NIXPACKS"
      },
      "deploy": {
        "startCommand": "gunicorn -w 4 -b 0.0.0.0:$PORT src.main:app",
        "healthcheckPath": "/api/health"
      },
      "variables": {
        "OPENAI_API_KEY": "${{OPENAI_API_KEY}}",
        "OPENAI_API_BASE": "https://api.openai.com/v1",
        "FLASK_ENV": "production"
      }
    },
    "frontend": {
      "source": {
        "repo": "podcast-illustrator-frontend"
      },
      "build": {
        "builder": "NIXPACKS",
        "buildCommand": "pnpm install && pnpm run build"
      },
      "deploy": {
        "startCommand": "pnpm run preview --host 0.0.0.0 --port $PORT"
      }
    }
  }
}

